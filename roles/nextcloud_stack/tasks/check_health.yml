---
- name: Проверить статус контейнеров Nextcloud
  community.docker.docker_container_info:
    name: "{{ item }}"
  loop:
    - nextcloud-mariadb
    - nextcloud-redis
    - nextcloud-app
    - onlyoffice-documentserver
    - nginx-proxy
    - nextcloud-haproxy
  register: container_info

- name: Вывести состояние контейнеров
  debug:
    msg: "{{ item.Name }}: {{ item.State.Status }}, Health: {{ item.State.Health.Status | default('unknown') }}"
  loop: "{{ container_info.results | map(attribute='containers') | list | flatten }}"
